@page
@model IntouchBilling.Pages.ReportModel
@{
    Layout = "_Layout";
}
</br>

<div class="row">
    </br>
</div>
<form asp-page-handler="Search" method="post">
    <div class="row">
        @*<div class="col-sm-1">

        </div>*@
        <div class="col-md-3">
            <label for="FromDate">From Date </label>
            <br />
            <input type="text" id="txtfromdate" name="FromDate">
        </div>
        
        <div class="col-md-3">
            <label for="ToDate">To Date </label>
            <br />
            <input type="text" id="txttodate" name="ToDate">
        </div>
       
        <div class="col-md-3">
            <label for="status"> Select Status  </label><br>
             <select id="statusid" name="SearchStatus" class="ddlStyle">
                    <option value="All" selected>All</option>
                    <option value="Paid">Paid</option>
                    <option value="Pending">Pending</option>
                    <option value="Deleted">Deleted</option>
             </select><br>
        </div>

        <div class="col-md-3">
            <label for="status">  </label><br>
            <button class="submit">Search</button>
        </div>
    </div>
</form>

<div class="row">
    </br>
</div>
<table id="dataList" class="table table-striped table-bordered" style="width:100%">
    <thead class="thead-light">
        <tr>
            <th hidden>
                @Html.DisplayNameFor(model => model.Billing[0].RegistrationId)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Billing[0].Category)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Billing[0].CustomerName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Billing[0].Mobile)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Billing[0].Session)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Billing[0].Amount)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Billing[0].PaymentMode)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Billing[0].Status)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Billing[0].CreatedOn)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Billing)
        {
            var tm = "#updateModal" + item.RegistrationId;
            var mid = "updateModal" + item.RegistrationId;
            var modalid = "#deleteModal" + item.RegistrationId;
            var dltmodalid = "deleteModal" + item.RegistrationId;
            var pm = "#printModal" + item.RegistrationId;
            var printmodalid = "printModal" + item.RegistrationId;
            <tr>
                <td hidden>
                    @Html.DisplayFor(modelItem => item.RegistrationId)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Category)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CustomerName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Mobile)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Session)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Amount)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.PaymentMode)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Status)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.CreatedOn)
                </td>
                <td>
                    
                    <form asp-page-handler="Print" method="post" asp-route-Id="@item.RegistrationId">
                        <button class="submit">Print</button>                      
                    </form>



                    <button type="button" class="submit" data-toggle="modal" data-target="@tm">
                        Update Status
                    </button>

                    <div class="modal fade" id="@mid" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="submit" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title" id="myModalLabel">Update Confirmation</h4>
                                </div>
                                <div class="modal-body">
                                    Are you sure want to update the payment status as Paid?
                                </div>
                                <div class="modal-footer">
                                    <form asp-page-handler="Update" method="post" asp-route-Id="@item.RegistrationId">
                                        <button type="submit">Update</button>
                                        <button type="button" class="submit" data-dismiss="modal">Close</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div> <br />
                    <button type="button" class="submit" data-toggle="modal" data-target="@modalid">
                        Delete
                    </button>

                    <div class="modal fade" id="@dltmodalid" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="submit" data-dismiss="modal" aria-hidden="true">&times;</button>
                                    <h4 class="modal-title" id="myModalLabel">Delete Confirmation</h4>
                                </div>
                                <div class="modal-body">
                                    Are you sure want to delete this item?
                                </div>
                                <div class="modal-footer">
                                    <form asp-page-handler="Delete" method="post" asp-route-Id="@item.RegistrationId">
                                        <button type="submit">Delete</button>
                                        <button type="button" class="submit" data-dismiss="modal">Close</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
        }
    </tbody>
</table>
<link href="~/css/jquery-ui.min.css" rel="stylesheet" />
<script src="~/js/jquery-3.2.1.slim.min.js"></script>
<script src="~/js/jquery-1.10.2.js"></script>
<script src="~/js/jquery.validate.js"></script>
<script src="~/js/jquery-ui.js"></script>



<script>
    $(document).ready(function () {

        $('#dataList').dataTable();

        $("#txtfromdate").datepicker(
            {
                dateFormat: 'dd-mm-yy',
                changeMonth: true,
                changeYear: true,
                yearRange: '1950:2100'
            });

        $("#txttodate").datepicker(
            {
                dateFormat: 'dd-mm-yy',
                changeMonth: true,
                changeYear: true,
                yearRange: '1950:2100'
            });
    });


</script>
